= Git: Tutori치l
:toc:
:imagesdir: ../../images/git/

Odevzd치v치n칤 ve코ker칠 pr치ce b캩hem BI-3DT (krom캩 fyzick칳ch v칳tisk콢),
prob칤h치 pomoc칤 Gitu.
Git server, kter칳 se pou쮂셨치, je GitHub.
Tento tutori치l je pouze rychl칳 칰vod do pr치ce s Gitem pro pot콏eby p콏edm캩tu, 
rozhodn캩 to nen칤 kompletn칤 n치vod ke Gitu;
d콢razn캩 doporu캜ujeme za캜칤t Git aktivn캩 vyu쮂셨at na v코echny va코e projekty nejen
v r치mci fakulty.
To, co se tu do캜tete, v치m bude sta캜it k odevzd치v치n칤 칰loh na p콏edm캩t BI-3DT.

== Po캜치te캜n칤 stav

Ke ka쬯칠mu zad치n칤 budete m칤t p콏ipraven칳 odkaz,
kter칳 vygeneruje nov칳 repozit치콏 na GitHubu.
Pokud nem치te GitHub 칰캜et, server v치s vyzve k jeho vytvo콏en칤.
Repozit치콏e se generuj칤 pod organizac칤 
https://github.com/3DprintFIT[3DprintFIT] a jsou priv치tn칤, to znamen치,
쬰 do nich m치te p콏칤stup pouze vy a xref:../teachers/index#[u캜itel칠 BI-3DT].

Po automatick칠m vytvo콏en칤 nov칠ho repozit치콏e uvid칤te toto:

.Nov칳 repozit치콏 je p콏ipraven
image::new_repo.png[]


== Instalace gitu

[source,console]
[syky@fedora ~]$ git
bash: git: command not found

* https://git-scm.com/download/linux[Linux] 游냖
* https://git-scm.com/download/mac[macOS] (odkaz zah치j칤 stahov치n칤 instal치toru)
* https://git-scm.com/download/win[Windows] (odkaz zah치j칤 stahov치n칤 instal치toru)

Po instalaci:

[source,console]
[syky@fedora ~]$ git
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
...


== Nastaven칤 SSH kl칤캜e

Abyste mohli komunikovat s Git serverem,
je pot콏eba zajistit va코i identifikaci,
k tomu slou쮂 SSH kl칤캜.
Existuje i varianta pou쬴t칤 jm칠na a hesla,
ale tu d콢razn캩 nedoporu캜ujeme.
GitHub ostatn캩 nab칤z칤 i dvoufaktorovu autentizaci,
kterou chcete za캜칤t pou쮂셨at.

=== Pokud je코t캩 nem치te SSH kl칤캜

Vytvo콏te ho pomoc칤:

[source,console]
[syky@fedora ~]$ ssh-keygen -t rsa -b 4096

Budete dot치z치ni na um칤st캩n칤 kl칤캜e a na heslo (passphrase),
je zcela na v치s, co zvol칤te,
v칳choz칤 cesta ke kl칤캜i je `~/.ssh/id_rsa` a passphrase m콢쬰 b칳t pr치zdn치.

V칳sledek by m캩l vypadat n캩jak takto:

[source,console]
Generating public/private rsa key pair.
Enter file in which to save the key (/home/syky/.ssh/id_rsa):
Created directory '/home/syky/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/syky/.ssh/id_rsa.
Your public key has been saved in /home/syky/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:6hIZxGQ2Xmctitvr5D3U+XQv7+B6hZclhJMkLIGHG4U syky@fedora
The key's randomart image is:
+---[RSA 2048]----+
|   o= .==+...o   |
|   +ooEo+ o.+ .  |
|   ... = o   o   |
|    o o       . .|
|     =  S. .   oo|
|    + ... o . o.o|
|     .oo   o ..+ |
|    .+...   ..o..|
|     o+ ..  .o.+o|
+----[SHA256]-----+


CAUTION: Nikdy, *nikdy*, *NIKDY* nikam nekop칤rujte sv콢j soukrom칳 kl칤캜
(ten, co **ne**kon캜칤 na `.pub`). Ve콏ejn칳 kl칤캜 klidn캩 vystavte na web.

=== Pokud ji m치te SSH kl칤캜 (t콏eba pr치v캩 vyroben칳)

Zobrazte si **ve콏ejn칳** kl칤캜 (ten, co kon캜칤 `.pub`).
[source,console]
[syky@fedora ~]$ cat ~/.ssh/id_rsa.pub

Vysledek cel칳 zkop칤rujte do schr치nky a p콏ejd캩te na
https://github.com/settings/ssh/new[zad치n칤 kl칤캜e na GitHubu].

[source,console]
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCiFJ+V+CUF1u1ZRhphaLUU92auMtpJrjWxOMZF8Dqxc6E4cOfWsUNeCLjzeeOT7786DBLBVn60yjEPHcfRcl6hycOJkREpW1WOUTvzMU9nrBde0PTHoB2tV0acWpu+dgyvhMd82VZ6maCojnvvqv99HkQ4wb/HJHAWzTJvHslYXmOiukCxM7zdUaqGkCVvgx8HiCU32Fo3lYkf/7hLs2I8i/P6urNX9ui3vHpeTKXgFHt7vr2U33YcGzkitO8s6KGqWwom29vduXlIWRQMOCLRUTH8OlEm61A0Xful4Xtt1CKSlXDo9TOK6tfEPVI6kKUfCf+2py7glps+wAZ2dy0b syky@fedora

Kl칤캜 vlo쬾e do pole pro kl칤캜 (n치zev je nepovinn칳) a ulo쬾e.

.P콏id치n칤 kl칤캜e na GitHub
image::new_ssh_rsa.png[]


Uvid칤te n캩co podobn칠ho:

.칔sp캩코n캩 p콏idan칳 SSH kl칤캜
image::added_ssh_rsa.png[]


== Pr치ce s repozit치콏em


Doporu캜ujeme si vytvo콏it jednu slo쬶u pro va코e Github repozit치콏e pro BI-3DT.

[source,console]
[syky@fedora ~]$ mkdir BI-3DT && cd BI-3DT

Pro naklonov치n칤 pou쬴jte *SSH URL*, (za캜칤n치 `git@`)
a repozit치콏 naklonuje k sob캩 na po캜칤ta캜.
Naklonov치n칤 znamen치 vytvo콏en칤 lok치ln칤 kopie.

.SSH URL
image::get_ssh_url.png[]


[source,console]
[syky@fedora BI-3DT]$ git clone git@github.com:3DprintFIT/B181AS-Username-syky27.git
Cloning into 'B181AS-Username-syky27'...
The authenticity of host 'github.com (192.30.253.112)' can't be established.
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
RSA key fingerprint is MD5:16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,192.30.253.112' (RSA) to the list of known hosts.
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4 (delta 0), reused 4 (delta 0), pack-reused 0
Receiving objects: 100% (4/4), done.
[syky@fedora BI-3DT]$


Vytvo콏칤 se  slo쬶a s repozit치콏em:

[source,console]
[syky@fedora BI-3DT]$ ll
total 0
drwxrwxr-x. 3 syky syky 54 Sep 28 13:05 B181AS-Username-syky27

Uvnit콏 naleznete ve코ker칠 soubory,
kter칠 byly v repozit치콏i na serveru v dob캩 klonov치n칤.

[source,console]
[syky@fedora BI-3DT]$ cd B181AS-Username-syky27
[syky@fedora B181AS-Username-syky27]$ ll
total 8
-rw-rw-r--. 1 syky syky 196 Sep 28 13:05 Jenkinsfile
-rw-rw-r--. 1 syky syky 152 Sep 28 13:05 README.md

[IMPORTANT]
====
Jestli pou쮂셨치te Git z v칤ce m칤st
(nap콏칤klad ze sv칠ho po캜칤ta캜e a z u캜ebnov칠ho po캜칤ta캜e)
a m치te repozit치콏 naklonov치n z d콏칤v캩j코ka,
p콏ed zapo캜et칤m pr치ce v쬯y prove캞te `pull` pro aktualizaci soubor콢,
abyste p콏ede코li konflikt콢m mezi vzd치len칳mi a lok치ln칤mi zm캩nami.

[source,console]
[syky@fedora B181AS-Username-syky27]$ git pull
Already up to date.
====


Vytvo콏칤m nov칳 soubor:

[source,console]
[syky@fedora B181AS-Username-syky27]$ echo "My super secret username" > USERNAME
[syky@fedora B181AS-Username-syky27]$ ll
total 12
-rw-rw-r--. 1 syky syky 196 Sep 28 13:05 Jenkinsfile
-rw-rw-r--. 1 syky syky 152 Sep 28 13:05 README.md
-rw-rw-r--. 1 syky syky  25 Sep 28 13:10 USERNAME

Git mi umo쮄갓je pod칤vat se na zm캩ny, kter칠 prob캩hly od minul칠ho commitu:

[source,console]
----
[syky@fedora B181AS-Username-syky27]$ git status
On branch master
Your branch is up to date with 'origin/master'.

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	USERNAME

nothing added to commit but untracked files present (use "git add" to track)
----

Vid칤m, 쬰 se vytvo콏il nov칳 soubor `USERNAME`, 콏eknu Gitu,
쬰 chci, aby ho trackoval:


[source,console]
----
[syky@fedora B181AS-Username-syky27]$ git add USERNAME
[syky@fedora B181AS-Username-syky27]$ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	new file:   USERNAME
----

Pop칤코i zm캩nu pomoc칤 commitu:

[source,console]
----
[syky@fedora B181AS-Username-syky27]$ git commit -am"USERNAME file with my username"

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'syky@fedora.(none)')
----

Pokud vid칤m tuto chybu, znamen치 to, 쬰 mus칤m Gitu 콏칤ci, kdo jsem. 캛ili:

[source,console]
$ git config --global user.email "sykorto6@fit.cvut.cz"
$ git config --global user.name "Tom치코 S칳kora"

Pot칠 zopakuji vytvo콏en칤 commitu:

[source,console]
[syky@fedora B181AS-Username-syky27]$ git commit -am"USERNAME file with my username"
[master 2078a00] USERNAME file with my username
 1 file changed, 1 insertion(+)
 create mode 100644 USERNAME

Commit je vytvo콏en, mohu se pod칤vat, co se v n캩m zm캩nilo:

[source,console]
----
[syky@fedora B181AS-Username-syky27]$ git show
commit 2078a007fa2d91e7bc2bb40d802bfa4eb17fd05c (HEAD -> master)
Author: Tom치코 S칳kora <sykorto6@fit.cvut.cz>
Date:   Fri Sep 28 13:21:39 2018 +0200

    USERNAME file with my username

diff --git a/USERNAME b/USERNAME
new file mode 100644
index 0000000..ac11935
--- /dev/null
+++ b/USERNAME
@@ -0,0 +1 @@
+My super secret username
----


N치sledn캩 nahraji zm캩ny na GitHub:

[source,console]
[syky@fedora B181AS-Username-syky27]$ git push
Warning: Permanently added the RSA host key for IP address '192.30.253.113' to the list of known hosts.
Counting objects: 3, done.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 362 bytes | 362.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To github.com:3DprintFIT/B181AS-Username-syky27.git
   dc5189b..2078a00  master -> master

.Zm캩ny jsou na GitHubu vid캩t
image::pushed_changes.png[]

U repozit치콏e na kart캩 *Issues* vid칤te v칳sledek na코eho syst칠mu,
kter칳 캜치ste캜n캩 automaticky hodnot칤 칰lohy.
Pokud m치te hotovo a vyhodnoceno (a 칰loha je bodovan치),
p콏ihlaste se cvi캜칤c칤mu o body.

.Seznam issues, nejnov캩j코칤 je naho콏e
image::issues.png[]

.Detail jedn칠 issue: N캩co se nepovedlo, pokra캜ujte d치le ve snaze, nebo se pora캞te s cvi캜칤c칤m
image::issue_detail.png[]

NOTE: V n치zvu issue je _commit hash_: jednozna캜칳 identifik치tor commitu,
kter칳 syst칠m hodnotil.
Pokud 캜ek치te na ohodnocen칤 d칠le ne 5 minut, kontaktujete cvi캜칤c칤ho.
